(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{356:function(t,e,a){"use strict";a.r(e);var s=a(43),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"application-deployment-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-deployment-configuration"}},[t._v("#")]),t._v(" Application Deployment Configuration")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#include-a-json-configuration-file-in-your-application"}},[t._v("Include a JSON configuration file in your application")])]),a("li",[a("a",{attrs:{href:"#root-structure"}},[t._v("Root Structure")]),a("ul",[a("li",[a("a",{attrs:{href:"#history"}},[t._v("history")])]),a("li",[a("a",{attrs:{href:"#npm"}},[t._v("npm")])]),a("li",[a("a",{attrs:{href:"#snsnotifications"}},[t._v("snsNotifications")])]),a("li",[a("a",{attrs:{href:"#taskfilters"}},[t._v("taskFilters")])])])]),a("li",[a("a",{attrs:{href:"#tasks"}},[t._v("Tasks")]),a("ul",[a("li",[a("a",{attrs:{href:"#s3-tasks"}},[t._v("S3 Tasks")]),a("ul",[a("li",[a("a",{attrs:{href:"#structure"}},[t._v("Structure")])]),a("li",[a("a",{attrs:{href:"#usage"}},[t._v("Usage")])])])]),a("li",[a("a",{attrs:{href:"#lambda-tasks"}},[t._v("Lambda Tasks")]),a("ul",[a("li",[a("a",{attrs:{href:"#structure"}},[t._v("Structure")])]),a("li",[a("a",{attrs:{href:"#usage"}},[t._v("Usage")])])])]),a("li",[a("a",{attrs:{href:"#api-gateway-tasks"}},[t._v("API Gateway Tasks")]),a("ul",[a("li",[a("a",{attrs:{href:"#structure"}},[t._v("Structure")])]),a("li",[a("a",{attrs:{href:"#usage"}},[t._v("Usage")])])])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"include-a-json-configuration-file-in-your-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#include-a-json-configuration-file-in-your-application"}},[t._v("#")]),t._v(" Include a JSON configuration file in your application")]),t._v(" "),a("p",[t._v("The file should be named "),a("code",[t._v("lamb-duh.configuration.json")]),t._v(" and should appear at the root of your compressed deployment archive.")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/ExampleConfiguration.html"}},[t._v("A complete JSON configuration can be found here")]),t._v(", and is the complete JSON document for the structure and detailed descriptions below.")],1),t._v(" "),a("h2",{attrs:{id:"root-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#root-structure"}},[t._v("#")]),t._v(" Root Structure")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"applicationName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MyApplication"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"history"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npm"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"snsNotifications"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"taskFilters"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tasks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("applicationName")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("Used as part of the AWS Lambda function naming, and the API Gateway name for the API"),a("br"),a("em",[t._v("Functions will all be "),a("strong",[t._v("ld_{applicationName}_{FUNCTION-NAME}")])])])]),t._v(" "),a("tr",[a("td",[t._v("history")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Map")]),t._v(" "),a("td",[t._v("Specify options for post-deployment storage of the deployed compressed archive file")])]),t._v(" "),a("tr",[a("td",[t._v("npm")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Map")]),t._v(" "),a("td",[t._v("Configure authorization and scopes for registries")])]),t._v(" "),a("tr",[a("td",[t._v("snsNotifications")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Map")]),t._v(" "),a("td",[t._v("Used to send a message when processing starts, and again when it completes"),a("br"),t._v(" "),a("a",{attrs:{href:"#snsnotifications"}},[t._v("See snsNotifications")])])]),t._v(" "),a("tr",[a("td",[t._v("taskFilters")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Map")]),t._v(" "),a("td",[t._v("Filter the deployment to a sub-set of the configuration"),a("br"),a("em",[t._v("Useful when the array of Lambda functions or API Gateway endpoints becomes too large to manually manage when developing/testing only a few")]),a("br"),t._v(" "),a("a",{attrs:{href:"#taskfilters"}},[t._v("See taskFilters")])])]),t._v(" "),a("tr",[a("td",[t._v("tasks")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("Set of tasks to be performed as part of deployment"),a("br"),t._v(" "),a("a",{attrs:{href:"#tasks"}},[t._v("See tasks")])])])])]),t._v(" "),a("h3",{attrs:{id:"history"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#history"}},[t._v("#")]),t._v(" history")]),t._v(" "),a("p",[t._v("By default, Lamb-duh will store the compressed archive file after the application has been deployed.\nThe file will be moved to "),a("code",[t._v("Lamb-duh_archive/{applicationName}/{timestamp}/{archive-file-name}")]),t._v(" in the bucket - and under the key prefix - where the archive file was originally uploaded to trigger the Lamb-duh process.")]),t._v(" "),a("p",[t._v("At present, the only option available is to turn off the historical storage action.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"noHistory"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("noHistory")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Boolean")]),t._v(" "),a("td",[t._v("Turns off the historical storage. The compressed archive file will remain in the bucket at the original upload key after deployment completes")])])])]),t._v(" "),a("h3",{attrs:{id:"npm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#npm"}},[t._v("#")]),t._v(" npm")]),t._v(" "),a("p",[t._v("If NPM authentication, or other package registries (e.g. "),a("a",{attrs:{href:"https://github.com/features/packages",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github Package Registry"),a("OutboundLink")],1),t._v("), are needed, Lamb-duh enables easy configuration for both authentication and package scopes.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorization"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm.pkg.github.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"token"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ABCDEF0123456789"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"registry"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scope"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"exampleorg"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://npm.pkg.github.com/exampleorg"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("authorization")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("Objects defining the authentication token for NPM registries"),a("br"),a("ul",[a("li",[a("code",[t._v("registry")]),t._v(" - "),a("em",[t._v("required")]),t._v(" - The domain name for the registry")]),a("li",[a("code",[t._v("token")]),t._v(" - "),a("em",[t._v("required")]),t._v(" - The authorization token used to access the registry")])])])]),t._v(" "),a("tr",[a("td",[t._v("registry")]),t._v(" "),a("td",[t._v("no")]),t._v(" "),a("td",[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("Objects defining the registry(ies) and scope(s) to be utilized"),a("br"),a("ul",[a("li",[a("code",[t._v("scope")]),t._v(" - "),a("em",[t._v("optional")]),t._v(' - The scope to use with the registry located at the URL (with or without leading "@")')]),a("li",[a("code",[t._v("url")]),t._v(" - "),a("em",[t._v("required")]),t._v(" - Full URL for the registry endpoint")])])])])])]),t._v(" "),a("h3",{attrs:{id:"snsnotifications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#snsnotifications"}},[t._v("#")]),t._v(" snsNotifications")]),t._v(" "),a("p",[t._v("If included, Lamb-duh will send notifications when beginning and ending processing to the configured topic ARN, including a summary of what is included, and total elapsed runtime at the end.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"topicArn"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arn:aws:sns:us-east-1:1234567890:lamb-duh-deployment"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeZone"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"America/New_York"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",[t._v("Required")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("topicArn")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[t._v("The ARN for the SNS topic for publication")])]),t._v(" "),a("tr",[a("td",[t._v("timeZone")]),t._v(" "),a("td",[t._v("yes")]),t._v(" "),a("td",[t._v("String")]),t._v(" "),a("td",[a("ul",[a("li",[t._v("This should be an IANA timezone string")]),a("li",[t._v("Lamb-duh uses "),a("a",{attrs:{href:"https://moment.github.io/luxon/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Luxon"),a("OutboundLink")],1),t._v(" under-the-hood, and any valid timezone string can be used")])])])])])]),t._v(" "),a("h3",{attrs:{id:"taskfilters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#taskfilters"}},[t._v("#")]),t._v(" taskFilters")]),t._v(" "),a("p",[t._v("If included, Lamb-duh will only run the configured tasks.\nLamb-duh will auto-configure "),a("em",[t._v("apiGateway")]),t._v(" if only the "),a("em",[t._v("lambda")]),t._v(" key is included.")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"include"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lambda"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"apiGateway"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("lambda")]),t._v(" "),a("td",[t._v("Array<String>")]),t._v(" "),a("td",[t._v("String array listing the "),a("strong",[t._v("functionName")]),t._v(" property of the functions to include in deployment"),a("br"),a("code",[t._v('{ "lambda": [ "function1", "function2" ] }')])])]),t._v(" "),a("tr",[a("td",[t._v("apiGateway")]),t._v(" "),a("td",[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("Object array that can include the "),a("strong",[t._v("path")]),t._v(" or "),a("strong",[t._v("functionName")]),t._v(" on the endpoint (or non-endpoint alias for versioned, not-public functions), and can optionally specify the "),a("strong",[t._v("method")]),t._v(" as well"),a("br"),a("code",[t._v('{ "apiGateway": [ { "path": "/gateway/path/to/use" }, { "functionName": "function1" }, { "functionName": "function2", "method": "GET" } ] }')]),a("br"),t._v(" "),a("ul",[a("li",[t._v("If "),a("code",[t._v('"apiGateway"')]),t._v(" is not specified, but one or more functions are listed for "),a("code",[t._v('"lambda"')]),t._v(", "),a("code",[t._v('"apiGateway"')]),t._v(" will automatically be generated from your configuration for only those functions")])])])])])]),t._v(" "),a("h2",{attrs:{id:"tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tasks"}},[t._v("#")]),t._v(" Tasks")]),t._v(" "),a("p",[t._v("Tasks is an array of objects defining deployment steps with different options based on the "),a("strong",[t._v("type")]),t._v(" property.  There are three types of deployment tasks supported by Lamb-duh: S3, Lambda, and API Gateway.")]),t._v(" "),a("h3",{attrs:{id:"s3-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3-tasks"}},[t._v("#")]),t._v(" S3 Tasks")]),t._v(" "),a("p",[t._v("Deploy static files in your application source compressed archive to an S3 bucket.")]),t._v(" "),a("h4",{attrs:{id:"structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#structure"}},[t._v("#")]),t._v(" Structure")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"S3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"disabled"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./relative/path/to/static/files"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dest"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bucket"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bucketname"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"key"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"optional/key/prefix"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"what-does-this-structure-do"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-does-this-structure-do"}},[t._v("#")]),t._v(" What does this structure do?")]),t._v(" "),a("ul",[a("li",[t._v("Copy all files found in the compressed archive under "),a("code",[t._v("relative/path/to/frontend/")]),t._v(" to the bucket "),a("code",[t._v("bucketname")]),t._v(".\nFor each file:\n"),a("ul",[a("li",[t._v("Prefixes with "),a("code",[t._v("optional/key/prefix/")])]),t._v(" "),a("li",[t._v("Set the "),a("em",[t._v("Cache-Control")]),t._v(" header to "),a("strong",[t._v("no-cache")])]),t._v(" "),a("li",[t._v("Generate a unique "),a("em",[t._v("ETag")])])])]),t._v(" "),a("li",[t._v("Remove any files in "),a("code",[t._v("bucketname")]),t._v(" - under "),a("code",[t._v("optional/key/prefix")]),t._v(" - that are not included in the source")])]),t._v(" "),a("h4",{attrs:{id:"usage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),a("p",[t._v("In the structure above - "),a("code",[t._v("./relative/path/to/frontend")]),t._v(" will be copied to a bucket named "),a("code",[t._v("bucketname")]),t._v(" and using the key prefix "),a("code",[t._v("optional/key/prefix/")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("dest.key")]),t._v(" is an optional field - use it if you need it")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[a("strong",[t._v("S3")]),t._v(" for this task")])]),t._v(" "),a("tr",[a("td",[t._v("disabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Boolean")]),t._v(" "),a("td",[t._v("Is the task disabled?"),a("br"),a("em",[t._v("Will be skipped if "),a("code",[t._v("true")])]),a("br"),a("br"),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("false")])])]),t._v(" "),a("tr",[a("td",[t._v("source")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Relative path in compressed archive to files to copy")])]),t._v(" "),a("tr",[a("td",[t._v("dest")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Destination bucket information "),a("ul",[a("li",[a("code",[t._v("bucket")]),t._v(" - the name of the S3 bucket")]),t._v(" "),a("li",[a("code",[t._v("key")]),t._v(" - "),a("em",[t._v("optional")]),t._v(" - A prefix for all files copied in")])])])]),t._v(" "),a("tr",[a("td",[t._v("cacheControl")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Cache string"),a("br"),a("br"),a("em",[t._v("Default: "),a("strong",[t._v("no-cache")])])])])])]),t._v(" "),a("h3",{attrs:{id:"lambda-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lambda-tasks"}},[t._v("#")]),t._v(" Lambda Tasks")]),t._v(" "),a("p",[t._v("Deploy multiple functions to Lambda.")]),t._v(" "),a("p",[t._v("For each function:")]),t._v(" "),a("ul",[a("li",[t._v("A Lambda function named "),a("em",[t._v("ld_{applicationName}_{FUNCTION-NAME}")]),t._v(" will be created")]),t._v(" "),a("li",[t._v("A unique directory tree will be built for local modules, traversing all relative requires, and only including modules in the Lambda package that are relevant for the function")]),t._v(" "),a("li",[t._v("Code will be deployed using the set "),a("em",[t._v("compressionLevel")]),t._v(" when creating the zip for Lambda deployment\n"),a("ul",[a("li",[t._v("Lambda calculates code size based on the package deployed to it, not the zip file")]),t._v(" "),a("li",[t._v("Any compression over 0 will require additional memory when building the zip file")])])])]),t._v(" "),a("h4",{attrs:{id:"structure-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#structure-2"}},[t._v("#")]),t._v(" Structure")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Lambda"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"disabled"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alternatePackageJson"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"serverless.package.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"compressionLevel"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"handler"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lambda"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iamRoleArn"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arn:aws:iam::1234567890:role/primaryRoleName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"memorySize"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodejs8.10"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"functions"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lambdaFunction1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/function1.js"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lambdaFunction2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/to/function2.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"iamRoleArn"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arn:aws:iam::1234567890:role/alternateRoleName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"memorySize"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"timeout"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"runtime"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodejs6.10"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"handler"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"main"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"what-does-this-structure-do-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-does-this-structure-do-2"}},[t._v("#")]),t._v(" What does this structure do?")]),t._v(" "),a("ul",[a("li",[t._v("Run "),a("code",[t._v("npm install")]),t._v(" using the "),a("code",[t._v("serverless.package.json")]),t._v(" file as the "),a("code",[t._v("package.json")]),t._v(" file")]),t._v(" "),a("li",[t._v("Create a Lambda function named "),a("code",[t._v("ld_MyApplication_lambdaFunction1")]),t._v(" "),a("em",[t._v("(Per the "),a("strong",[t._v("applicationName")]),t._v(" property in "),a("a",{attrs:{href:"#basic-structure"}},[t._v("Root Structure")]),t._v(" above)")]),t._v(" "),a("ul",[a("li",[t._v("Bundle "),a("code",[t._v("path/to/function1.js")]),t._v(", along with all of its local dependencies (and their local dependencies, etc.), as well as "),a("code",[t._v("node_modules")]),t._v(" and upload as the Lambda function code")]),t._v(" "),a("li",[t._v("Set the handler to: "),a("strong",[t._v("path/to/function1.lambda")])]),t._v(" "),a("li",[t._v("Set the IAM role for the function to: "),a("strong",[t._v("arn:aws:iam::1234567890:role/primaryRoleName")])]),t._v(" "),a("li",[t._v("Set the memory size to: "),a("strong",[t._v("256 MB")])]),t._v(" "),a("li",[t._v("Set the timeout to: "),a("strong",[t._v("10 seconds")])]),t._v(" "),a("li",[t._v("Set the runtime to: Lambda's "),a("strong",[t._v("NodeJS 8")]),t._v(" version")])])]),t._v(" "),a("li",[t._v("Create a Lambda function named "),a("code",[t._v("ld_MyApplication_lambdaFunction2")]),t._v(" "),a("ul",[a("li",[t._v("Bundle "),a("code",[t._v("path/to/function2.js")]),t._v(" (and dependencies/node_modules)")]),t._v(" "),a("li",[t._v("Set the handler to: "),a("strong",[t._v("path/to/function2.main")])]),t._v(" "),a("li",[t._v("Set the IAM role for the function to: "),a("strong",[t._v("arn:aws:iam::1234567890:role/alternateRoleName")])]),t._v(" "),a("li",[t._v("Set the memory size to: "),a("strong",[t._v("1024 MB")])]),t._v(" "),a("li",[t._v("Set the timeout to: "),a("strong",[t._v("5 seconds")])]),t._v(" "),a("li",[t._v("Set the runtime to: Lambda's "),a("strong",[t._v("NodeJS 6")]),t._v(" version")])])])]),t._v(" "),a("h4",{attrs:{id:"usage-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage-2"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[a("strong",[t._v("Lambda")]),t._v(" for this task")])]),t._v(" "),a("tr",[a("td",[t._v("disabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Boolean")]),t._v(" "),a("td",[t._v("Is the task disabled?"),a("br"),a("em",[t._v("Will be skipped if "),a("code",[t._v("true")])]),a("br"),a("br"),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("false")])])]),t._v(" "),a("tr",[a("td",[t._v("alternatePackageJson")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("When Lamb-duh runs "),a("code",[t._v("npm install")]),t._v(" it will use the JSON file defined here as its "),a("code",[t._v("package.json")]),a("br"),a("br"),t._v(" "),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("package.json")])])]),t._v(" "),a("tr",[a("td",[t._v("compressionLevel")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",[t._v("Compression level to use when creating the deployment package for a function"),a("br"),a("br"),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("0")])])]),t._v(" "),a("tr",[a("td",[t._v("default")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Specify default values for all functions."),a("br"),a("br"),a("em",[t._v("See all optional properties for "),a("a",{attrs:{href:"#function-definition"}},[t._v("Function definition")])])])]),t._v(" "),a("tr",[a("td",[t._v("functions")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("The set of functions to deploy"),a("br"),a("br"),a("em",[t._v("See "),a("a",{attrs:{href:"#function-definition"}},[t._v("Function definition")])]),t._v(" for available properties")])])])]),t._v(" "),a("h5",{attrs:{id:"function-default-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#function-default-definition"}},[t._v("#")]),t._v(" Function/Default definition")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("In Default")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Name of the function")])]),t._v(" "),a("tr",[a("td",[t._v("source")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Relative path to the function's main code file in the source archive")])]),t._v(" "),a("tr",[a("td",[t._v("iamRoleArn")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("ARN for the role to be used by this function")])]),t._v(" "),a("tr",[a("td",[t._v("memorySize")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",[t._v("Memory size for the function "),a("br"),t._v(" "),a("strong",[t._v("must be from the set of values allowed by Lambda")])])]),t._v(" "),a("tr",[a("td",[t._v("timeout")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",[t._v("Time - in "),a("strong",[t._v("seconds")]),t._v(" - for the Lambda function to time out")])]),t._v(" "),a("tr",[a("td",[t._v("runtime")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Lambda runtime environment")])]),t._v(" "),a("tr",[a("td",[t._v("handler")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("The name of the export from the main code file to call"),a("br"),a("br"),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("handler")])])])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("Properties than can be set on the "),a("code",[t._v("default")]),t._v(' object, are noted as "In Default" in the table')])]),t._v(" "),a("h3",{attrs:{id:"api-gateway-tasks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api-gateway-tasks"}},[t._v("#")]),t._v(" API Gateway Tasks")]),t._v(" "),a("ul",[a("li",[t._v("Create an API using the application name defined at the root of the configuration")]),t._v(" "),a("li",[t._v("Create resources and methods for API endpoints\n"),a("ul",[a("li",[t._v("Add CORS headers to those methods")])])]),t._v(" "),a("li",[t._v("Version Lambda functions attached to the methods\n"),a("ul",[a("li",[t._v("Will also version defined Lambda functions that are not deployed as endpoints")])])]),t._v(" "),a("li",[t._v("Create deployment stages, and deploy to those stages")])]),t._v(" "),a("h4",{attrs:{id:"structure-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#structure-3"}},[t._v("#")]),t._v(" Structure")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"disabled"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApiGateway"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deployment"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"stage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"yourStageName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"production"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"versioningLimits"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"keep"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"expirationHours"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"origin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliasNonEndpoints"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"functionName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lambdaFunction1"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endpoints"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/request/path/from/root/{optionalParameters}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"method"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"functionName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lambdaFunction2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"headers"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"httpHeader1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameterName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"header1SentToLambda"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameters"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryParameter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameterName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"queryParameterSentToLambda"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"endpointConfiguration"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"routeProp"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"routeArray"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arr1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"arr2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"what-does-this-structure-do-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-does-this-structure-do-3"}},[t._v("#")]),t._v(" What does this structure do?")]),t._v(" "),a("ul",[a("li",[t._v("Create an API named "),a("code",[t._v("MyApplication")]),t._v(" "),a("ul",[a("li",[a("em",[t._v("Per the "),a("strong",[t._v("applicationName")]),t._v(" property in "),a("a",{attrs:{href:"#basic-structure"}},[t._v("Root Structure")]),t._v(" above")])])])]),t._v(" "),a("li",[t._v("Create a Lambda "),a("strong",[t._v("function version")]),t._v(" for "),a("code",[t._v("lambdaFunction1")]),t._v(" with the alias of "),a("code",[t._v("yourStageName")])]),t._v(" "),a("li",[t._v("Create the path resources\n"),a("ul",[a("li",[a("code",[t._v("/request")])]),t._v(" "),a("li",[a("code",[t._v("/request/path")])]),t._v(" "),a("li",[a("code",[t._v("/request/path/from")])]),t._v(" "),a("li",[a("code",[t._v("/request/path/from/root")])]),t._v(" "),a("li",[a("code",[t._v("/request/path/from/root/{optionalParameters}")])])])]),t._v(" "),a("li",[t._v("Create a GET method for "),a("code",[t._v("/request/path/from/root/{optionalParameters}")]),t._v(" "),a("ul",[a("li",[t._v("Add the header "),a("code",[t._v("httpHeader1")]),t._v(" to the method request")]),t._v(" "),a("li",[t._v("Add the query string parameter "),a("code",[t._v("queryParameter")]),t._v(" to the method request")]),t._v(" "),a("li",[t._v("Generate an "),a("code",[t._v("application/json")]),t._v(" body mapping template for the integration request with the following fields\n"),a("ul",[a("li",[a("code",[t._v("optionalParameters")])]),t._v(" "),a("li",[a("code",[t._v("header1SentToLambda")])]),t._v(" "),a("li",[a("code",[t._v("queryParameterSentToLambda")])]),t._v(" "),a("li",[a("code",[t._v("endpointConfiguration")])]),t._v(" "),a("li",[a("code",[t._v("requestor: { ip, userAgent }")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("requestor is "),a("u",[t._v("always")]),t._v(" included")]),t._v(", with the IP address and User Agent string for the request")])])])])]),t._v(" "),a("li",[t._v("Add a 200 response to the integration response")]),t._v(" "),a("li",[t._v("Add a 200 response to the method response")]),t._v(" "),a("li",[t._v("Create a Lambda "),a("strong",[t._v("function version")]),t._v(" for "),a("code",[t._v("lambdaFunction2")]),t._v(" with the alias of "),a("code",[t._v("yourStageName")])]),t._v(" "),a("li",[t._v("Integrate the method with Lambda function "),a("em",[t._v("ld_MyApplication_lambdaFunction2:yourStageName")]),t._v(" "),a("ul",[a("li",[t._v("Add the IAM permission necessary to run "),a("em",[t._v("ld_MyApplication_lambdaFunction2:yourStageName")]),t._v(" in Lambda from this method in API Gateway")])])])])]),t._v(" "),a("li",[t._v("Create an OPTIONS method for "),a("code",[t._v("/request/path/from/root/{optionalParameters}")]),t._v(" "),a("ul",[a("li",[t._v("Sends appropriate CORS response, including the Access-Control-Allow-Origin set to "),a("code",[t._v("*")])])])]),t._v(" "),a("li",[t._v("Creates the stage deployment named "),a("code",[t._v("yourStageName")])])]),t._v(" "),a("h4",{attrs:{id:"usage-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usage-3"}},[t._v("#")]),t._v(" Usage")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[a("strong",[t._v("ApiGateway")]),t._v(" for this task")])]),t._v(" "),a("tr",[a("td",[t._v("disabled")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Boolean")]),t._v(" "),a("td",[t._v("Is the task disabled?"),a("br"),a("em",[t._v("Will be skipped if "),a("code",[t._v("true")])]),a("br"),a("br"),a("em",[t._v("Default:")]),t._v(" "),a("strong",[t._v("false")])])]),t._v(" "),a("tr",[a("td",[t._v("deployment")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Values for deploying to a stage, and versioning Lambda functions")])]),t._v(" "),a("tr",[a("td",[t._v("deployment"),a("br"),t._v(".stage")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Name of stage to deploy")])]),t._v(" "),a("tr",[a("td",[t._v("deployment"),a("br"),t._v(".production")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Boolean")]),t._v(" "),a("td",[t._v("If "),a("strong",[t._v("true")]),t._v(", sets a unique version code as part of the versioning step")])]),t._v(" "),a("tr",[a("td",[t._v("deployment"),a("br"),t._v(".versioningLimits")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Control number of versions to maintain"),a("br"),a("em",[t._v("When "),a("strong",[t._v("deployment.production")]),t._v(" == "),a("strong",[t._v("true")])]),a("br"),a("br"),t._v("This allows for deploying a production stage with new code, and without breaking a deployed in-use frontend")])]),t._v(" "),a("tr",[a("td",[t._v("deployment"),a("br"),t._v(".versioningLimits"),a("br"),t._v(".keep")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",[t._v("# of versions to maintain when deploying the same stage")])]),t._v(" "),a("tr",[a("td",[t._v("deployment"),a("br"),t._v(".versioningLimits"),a("br"),t._v(".expirationHours")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",[t._v("Time, in hours, for expiring a version "),a("ul",[a("li",[a("em",[t._v("Expiration time takes precedence over # to "),a("strong",[t._v("keep")])])]),a("li",[a("em",[t._v("Lamb-duh "),a("u",[t._v("will not")]),t._v(" delete a version until it has expired, even if there are more versions than the maximum to keep")])])])])]),t._v(" "),a("tr",[a("td",[t._v("cors")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Lamb-duh can automatically create an HTTP OPTIONS method of type "),a("strong",[t._v("MOCK")]),t._v(" method for all endpoints to support CORS"),a("br"),t._v("This value should be "),a("code",[t._v('{ "origin": "*" }')]),t._v(" for all, or domain-specific for a single domain")])]),t._v(" "),a("tr",[a("td",[t._v("aliasNonEndpoints")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("The set of non-endpoint Lambda functions to version"),a("br"),a("br"),a("em",[t._v("See "),a("a",{attrs:{href:"#non-endpoint-definition"}},[t._v("Non-endpoint definition")])]),t._v(" for available properties")])]),t._v(" "),a("tr",[a("td",[t._v("endpoints")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("The set of endpoints to deploy"),a("br"),a("br"),a("em",[t._v("See "),a("a",{attrs:{href:"#endpoint-definition"}},[t._v("Endpoint definition")])]),t._v(" for available properties")])])])]),t._v(" "),a("h5",{attrs:{id:"cors-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cors-definition"}},[t._v("#")]),t._v(" CORS definition")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("origin")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Sets the "),a("em",[t._v("Access-Control-Allow-Origin")]),t._v(" header for CORS")])]),t._v(" "),a("tr",[a("td",[t._v("allowed")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Currently supports only one property: "),a("strong",[t._v("headers")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("headers: []")]),t._v(" - adds each header string in the array to the "),a("em",[t._v("Access-Control-Allow-Headers")]),t._v(" header for CORS")])])])])])]),t._v(" "),a("h5",{attrs:{id:"non-endpoint-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#non-endpoint-definition"}},[t._v("#")]),t._v(" Non-endpoint definition")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("functionName")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Name of function, in Lambda, to alias")])])])]),t._v(" "),a("h5",{attrs:{id:"endpoint-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#endpoint-definition"}},[t._v("#")]),t._v(" Endpoint definition")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("path")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("The full path, including optional parameters, to the endpoint resource in API Gateway")])]),t._v(" "),a("tr",[a("td",[t._v("method")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("The HTTP method for the endpoint")])]),t._v(" "),a("tr",[a("td",[t._v("functionName")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Name of function, in Lambda, to alias")])]),t._v(" "),a("tr",[a("td",[t._v("headers")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("HTTP Headers to accept and pass through to the Lambda function"),a("br"),a("br"),a("em",[t._v("See "),a("a",{attrs:{href:"#endpoint-headers"}},[t._v("Endpoint Headers")])]),t._v(" for available properties")])]),t._v(" "),a("tr",[a("td",[t._v("parameters")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Array<Map>")]),t._v(" "),a("td",[t._v("Query string paramters to accept and pass through to the Lambda function"),a("br"),a("br"),a("em",[t._v("See "),a("a",{attrs:{href:"#endpoint-parameters"}},[t._v("Endpoint Parameters")])]),t._v(" for available properties")])]),t._v(" "),a("tr",[a("td",[t._v("endpointConfiguration")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Map")]),t._v(" "),a("td",[t._v("Additional object data to pass through to the Lambda function")])])])]),t._v(" "),a("h6",{attrs:{id:"headers-parameters-endpointconfiguration-and-request-data"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#headers-parameters-endpointconfiguration-and-request-data"}},[t._v("#")]),t._v(" headers, parameters, endpointConfiguration, and request data")]),t._v(" "),a("p",[t._v("Lamb-duh uses API Gateway's method integration to pass data through to the Lambda function via a JSON request template.")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("headers:[]")]),t._v(" and "),a("code",[t._v("parameters:[]")]),t._v(" properties are arrays of HTTP headers or query string parameters to be utilized within the Lambda functions.\nBoth arrays have the same expected signature for values:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Property")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Required")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Type")]),t._v(" "),a("th",[t._v("Description")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("yes")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Name of "),a("em",[t._v("{HTTP Header, Query string parameter}")])])]),t._v(" "),a("tr",[a("td",[t._v("parameterName")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("no")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",[t._v("Property name used in the Lambda function's eventData object"),a("br"),a("br"),a("em",[t._v("Defaults to "),a("strong",[t._v("name")]),t._v(" property if omitted")])])])])]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("endpointConfiguration:{}")]),t._v(" map will be added as-is to the event data under an "),a("code",[t._v("endpointConfiguration")]),t._v(" property.\nThis can be used to pass route constants defined in API Gateway to Lambda functions, for instance when one function backs multiple routes with differing configurations")])])}),[],!1,null,null,null);e.default=n.exports}}]);