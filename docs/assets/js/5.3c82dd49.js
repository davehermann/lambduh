(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{359:function(a,e,t){"use strict";t.r(e);var o=t(43),i=Object(o.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"lamb-duh-cli-application"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lamb-duh-cli-application"}},[a._v("#")]),a._v(" Lamb-duh CLI Application")]),a._v(" "),t("p",[a._v("The CLI application, "),t("code",[a._v("lamb-duh")]),a._v(", can be used to initially configure Lamb-duh within AWS, as well as work with configuring and deploying applications.")]),a._v(" "),t("p",[a._v("Each command will walk through its process as noted.")]),a._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#initial-aws-configuration-automated"}},[a._v("Initial AWS Configuration: Automated")]),t("ul",[t("li",[t("a",{attrs:{href:"#prerequisite-s3-bucket"}},[a._v("Prerequisite: S3 Bucket")])]),t("li",[t("a",{attrs:{href:"#running"}},[a._v("Running")])])])]),t("li",[t("a",{attrs:{href:"#push-code-updates-to-aws-automated"}},[a._v("Push Code Updates to AWS: Automated")])]),t("li",[t("a",{attrs:{href:"#application-deployment"}},[a._v("Application Deployment")]),t("ul",[t("li",[t("a",{attrs:{href:"#add-a-deploy-configuration"}},[a._v("Add a deploy configuration")])]),t("li",[t("a",{attrs:{href:"#allow-s3-deployment-tasks"}},[a._v("Allow S3 Deployment Tasks")])]),t("li",[t("a",{attrs:{href:"#deploy-to-server"}},[a._v("Deploy to Server")])])])])])]),t("p"),a._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[a._v("AWS Credentials")]),a._v(" "),t("p",[a._v("The Lamb-duh CLI expects proper configuration of AWS shared credentials.\nThe CLI interface will ask for, and when necessary will store, the profile name if you use a shared credentials file with multiple profiles.\nIf you have only the default profile, prefer to select a profile via environment variables, or do not use a shared credentials file: "),t("strong",[a._v('leave the profile as "default" when asked by the CLI')])]),a._v(" "),t("p",[a._v("The Lamb-duh CLI will note what IAM policy permissions it needs to perform its tasks when it starts, and can also supply a JSON policy document.")])]),a._v(" "),t("h2",{attrs:{id:"initial-aws-configuration-automated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#initial-aws-configuration-automated"}},[a._v("#")]),a._v(" Initial AWS Configuration: Automated")]),a._v(" "),t("ul",[t("li",[a._v("Create a new IAM role, and all needed permissions, for Lamb-duh to deploy applications properly")]),a._v(" "),t("li",[a._v("Install Lamb-duh code as a function in AWS Lambda")]),a._v(" "),t("li",[a._v("Configure triggers on an S3 bucket")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("lamb-duh aws-install\n")])])]),t("h3",{attrs:{id:"prerequisite-s3-bucket"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prerequisite-s3-bucket"}},[a._v("#")]),a._v(" Prerequisite: S3 Bucket")]),a._v(" "),t("p",[a._v("Before running, you will need to have an S3 bucket where an application compressed file will be uploaded to start the deployment processing.\nYou can use an existing bucket, or create a new one.\nLamb-duh will install to the same region where the bucket exists.")]),a._v(" "),t("h3",{attrs:{id:"running"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#running"}},[a._v("#")]),a._v(" Running")]),a._v(" "),t("p",[a._v("The process will ask for you to name the IAM role, and Lambda function, which will be created, and ask for you to select the trigger bucket from your account's list of S3 buckets.")]),a._v(" "),t("h2",{attrs:{id:"push-code-updates-to-aws-automated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#push-code-updates-to-aws-automated"}},[a._v("#")]),a._v(" Push Code Updates to AWS: Automated")]),a._v(" "),t("ul",[t("li",[a._v("Apply latest version of source changes to your configured Lamb-duh deployment function in AWS Lambda")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("lamb-duh aws-update\n")])])]),t("p",[a._v('The update will ask for an AWS region, and then attempt to automatically identify your Lamb-duh function based on the tag: "Lamb-duh Resource" == "true".\nThis tag is added by the automated '),t("code",[a._v("lamb-duh aws-install")]),a._v(" process.")]),a._v(" "),t("p",[a._v("You will be asked to provied the function ARN for your Lamb-duh function if it can't be automatically found.")]),a._v(" "),t("h2",{attrs:{id:"application-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#application-deployment"}},[a._v("#")]),a._v(" Application Deployment")]),a._v(" "),t("p",[a._v("Lamb-duh can upload your archive to your S3 triggering bucket for you with a single command, "),t("code",[a._v("lamb-duh deploy")]),a._v(".")]),a._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[a._v("Configuration")]),a._v(" "),t("p",[a._v("To deploy an application, a configuration file must exist at the root of the archive bundle.\nSee "),t("RouterLink",{attrs:{to:"/LambduhConfiguration.html"}},[a._v("Lamb-duh configuration")]),a._v(" for details.")],1)]),a._v(" "),t("h3",{attrs:{id:"add-a-deploy-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-a-deploy-configuration"}},[a._v("#")]),a._v(" Add a deploy configuration")]),a._v(" "),t("ul",[t("li",[a._v("Client-side configuration used for running the "),t("code",[a._v("lamb-duh deploy")]),a._v(" command.")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("lamb-duh deploy-init\n")])])]),t("p",[a._v("Creates a deploy configuration at the current directory in "),t("code",[a._v("lamb-duh.deployment.json")]),a._v(".\nThe file contains:")]),a._v(" "),t("ul",[t("li",[a._v("Relative path to the compressed archive for deployment")]),a._v(" "),t("li",[a._v("Bucket for deployment")]),a._v(" "),t("li",[a._v("Key for the file")]),a._v(" "),t("li",[a._v("Relative path to the Lamb-duh configuration JSON file in source")])]),a._v(" "),t("h3",{attrs:{id:"allow-s3-deployment-tasks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#allow-s3-deployment-tasks"}},[a._v("#")]),a._v(" Allow S3 Deployment Tasks")]),a._v(" "),t("ul",[t("li",[a._v("Ensure the role used for Lamb-duh has permission to write to all buckets included in the application's Lamb-duh configuration")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("lamb-duh deploy-s3-permissions\n")])])]),t("p",[a._v("Scans the Lamb-duh configuration JSON for any S3 tasks, and adds any missing permissions to an IAM role.")]),a._v(" "),t("p",[a._v("This can also be "),t("RouterLink",{attrs:{to:"/ManualConfiguration.html#additional-policy-needed-for-each-s3-bucket-manipulated-by-a-deployment"}},[a._v("configured manually")]),a._v(".")],1),a._v(" "),t("h3",{attrs:{id:"deploy-to-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploy-to-server"}},[a._v("#")]),a._v(" Deploy to Server")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("lamb-duh deploy\n")])])]),t("p",[a._v("Uses "),t("code",[a._v("lamb-duh.deployment.json")]),a._v(" to upload the compressed archive file, and trigger the Lamb-duh deployment process in AWS.")])])}),[],!1,null,null,null);e.default=i.exports}}]);