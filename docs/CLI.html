<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lamb-duh CLI Application | Lamb-duh</title>
    <meta name="description" content="Stupid name. Stupidly simple serverless deployment to AWS.">
    
    
    <link rel="preload" href="/lambduh/assets/css/0.styles.f1942610.css" as="style"><link rel="preload" href="/lambduh/assets/js/app.ff34b4b2.js" as="script"><link rel="preload" href="/lambduh/assets/js/3.a35d3ce9.js" as="script"><link rel="prefetch" href="/lambduh/assets/js/10.af54ed86.js"><link rel="prefetch" href="/lambduh/assets/js/11.bc5dc81a.js"><link rel="prefetch" href="/lambduh/assets/js/12.96673b64.js"><link rel="prefetch" href="/lambduh/assets/js/2.ae4252f2.js"><link rel="prefetch" href="/lambduh/assets/js/4.52bb3f99.js"><link rel="prefetch" href="/lambduh/assets/js/5.6bcd0b2f.js"><link rel="prefetch" href="/lambduh/assets/js/6.4115ba85.js"><link rel="prefetch" href="/lambduh/assets/js/7.bdaf11db.js"><link rel="prefetch" href="/lambduh/assets/js/8.64188126.js"><link rel="prefetch" href="/lambduh/assets/js/9.48086f72.js">
    <link rel="stylesheet" href="/lambduh/assets/css/0.styles.f1942610.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lambduh/" class="home-link router-link-active"><!----> <span class="site-name">Lamb-duh</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/davehermann/lambduh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"> <a href="https://github.com/davehermann/lambduh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/lambduh/" class="sidebar-link">Lamb-duh</a></li><li><a href="/lambduh/GettingStarted.html" class="sidebar-link">Getting Started</a></li><li><a href="/lambduh/ManualConfiguration.html" class="sidebar-link">Initial AWS Configuration: Manual</a></li><li><a href="/lambduh/LambdaEnvironment.html" class="sidebar-link">Lamb-duh Runtime Options in AWS Lambda</a></li><li><a href="/lambduh/LambduhConfiguration.html" class="sidebar-link">Application Deployment Configuration</a></li><li><a href="/lambduh/ExampleDeployment.html" class="sidebar-link">Example Deployment</a></li><li><a href="/lambduh/CLI.html" class="active sidebar-link">Lamb-duh CLI Application</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lambduh/CLI.html#initial-aws-configuration-automated" class="sidebar-link">Initial AWS Configuration: Automated</a></li><li class="sidebar-sub-header"><a href="/lambduh/CLI.html#push-code-updates-to-aws-automated" class="sidebar-link">Push Code Updates to AWS: Automated</a></li><li class="sidebar-sub-header"><a href="/lambduh/CLI.html#application-deployment" class="sidebar-link">Application Deployment</a></li></ul></li><li><a href="/lambduh/UpgradeToV2.html" class="sidebar-link">v1 to v2 Migration</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="lamb-duh-cli-application"><a href="#lamb-duh-cli-application" aria-hidden="true" class="header-anchor">#</a> Lamb-duh CLI Application</h1> <p>The CLI application, <code>lamb-duh</code>, can be used to initially configure Lamb-duh within AWS, as well as work with configuring and deploying applications.</p> <p>Each command will walk through its process as noted.</p> <p></p><div class="table-of-contents"><ul><li><a href="#initial-aws-configuration-automated">Initial AWS Configuration: Automated</a><ul><li><a href="#prerequisite-s3-bucket">Prerequisite: S3 Bucket</a></li><li><a href="#running">Running</a></li></ul></li><li><a href="#push-code-updates-to-aws-automated">Push Code Updates to AWS: Automated</a></li><li><a href="#application-deployment">Application Deployment</a><ul><li><a href="#add-a-deploy-configuration">Add a deploy configuration</a></li><li><a href="#allow-s3-deployment-tasks">Allow S3 Deployment Tasks</a></li><li><a href="#deploy-to-server">Deploy to Server</a></li></ul></li></ul></div><p></p> <div class="danger custom-block"><p class="custom-block-title">AWS Credentials</p> <p>The Lamb-duh CLI expects proper configuration of AWS shared credentials.
The CLI interface will ask for, and when necessary will store, the profile name if you use a shared credentials file with multiple profiles.
If you have only the default profile, prefer to select a profile via environment variables, or do not use a shared credentials file: <strong>leave the profile as &quot;default&quot; when asked by the CLI</strong></p> <p>The Lamb-duh CLI will note what IAM policy permissions it needs to perform its tasks when it starts, and can also supply a JSON policy document.</p></div> <h2 id="initial-aws-configuration-automated"><a href="#initial-aws-configuration-automated" aria-hidden="true" class="header-anchor">#</a> Initial AWS Configuration: Automated</h2> <ul><li>Create a new IAM role, and all needed permissions, for Lamb-duh to deploy applications properly</li> <li>Install Lamb-duh code as a function in AWS Lambda</li> <li>Configure triggers on an S3 bucket</li></ul> <div class="language- extra-class"><pre class="language-text"><code>lamb-duh aws-install
</code></pre></div><h3 id="prerequisite-s3-bucket"><a href="#prerequisite-s3-bucket" aria-hidden="true" class="header-anchor">#</a> Prerequisite: S3 Bucket</h3> <p>Before running, you will need to have an S3 bucket where an application compressed file will be uploaded to start the deployment processing.
You can use an existing bucket, or create a new one.
Lamb-duh will install to the same region where the bucket exists.</p> <h3 id="running"><a href="#running" aria-hidden="true" class="header-anchor">#</a> Running</h3> <p>The process will ask for you to name the IAM role, and Lambda function, which will be created, and ask for you to select the trigger bucket from your account's list of S3 buckets.</p> <h2 id="push-code-updates-to-aws-automated"><a href="#push-code-updates-to-aws-automated" aria-hidden="true" class="header-anchor">#</a> Push Code Updates to AWS: Automated</h2> <ul><li>Apply latest version of source changes to your configured Lamb-duh deployment function in AWS Lambda</li></ul> <div class="language- extra-class"><pre class="language-text"><code>lamb-duh aws-update
</code></pre></div><p>The update will ask for an AWS region, and then attempt to automatically identify your Lamb-duh function based on the tag: &quot;Lamb-duh Resource&quot; == &quot;true&quot;.
This tag is added by the automated <code>lamb-duh aws-install</code> process.</p> <p>You will be asked to provied the function ARN for your Lamb-duh function if it can't be automatically found.</p> <h2 id="application-deployment"><a href="#application-deployment" aria-hidden="true" class="header-anchor">#</a> Application Deployment</h2> <p>Lamb-duh can upload your archive to your S3 triggering bucket for you with a single command, <code>lamb-duh deploy</code>.</p> <div class="warning custom-block"><p class="custom-block-title">Configuration</p> <p>To deploy an application, a configuration file must exist at the root of the archive bundle.
See <a href="/lambduh/LambduhConfiguration.html">Lamb-duh configuration</a> for details.</p></div> <h3 id="add-a-deploy-configuration"><a href="#add-a-deploy-configuration" aria-hidden="true" class="header-anchor">#</a> Add a deploy configuration</h3> <ul><li>Client-side configuration used for running the <code>lamb-duh deploy</code> command.</li></ul> <div class="language- extra-class"><pre class="language-text"><code>lamb-duh deploy-init
</code></pre></div><p>Creates a deploy configuration at the current directory in <code>lamb-duh.deployment.json</code>.
The file contains:</p> <ul><li>Relative path to the compressed archive for deployment</li> <li>Bucket for deployment</li> <li>Key for the file</li> <li>Relative path to the Lamb-duh configuration JSON file in source</li></ul> <h3 id="allow-s3-deployment-tasks"><a href="#allow-s3-deployment-tasks" aria-hidden="true" class="header-anchor">#</a> Allow S3 Deployment Tasks</h3> <ul><li>Ensure the role used for Lamb-duh has permission to write to all buckets included in the application's Lamb-duh configuration</li></ul> <div class="language- extra-class"><pre class="language-text"><code>lamb-duh deploy-s3-permissions
</code></pre></div><p>Scans the Lamb-duh configuration JSON for any S3 tasks, and adds any missing permissions to an IAM role.</p> <p>This can also be <a href="/lambduh/ManualConfiguration.html#additional-policy-needed-for-each-s3-bucket-manipulated-by-a-deployment">configured manually</a>.</p> <h3 id="deploy-to-server"><a href="#deploy-to-server" aria-hidden="true" class="header-anchor">#</a> Deploy to Server</h3> <div class="language- extra-class"><pre class="language-text"><code>lamb-duh deploy
</code></pre></div><p>Uses <code>lamb-duh.deployment.json</code> to upload the compressed archive file, and trigger the Lamb-duh deployment process in AWS.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/lambduh/ExampleDeployment.html" class="prev">
          Example Deployment
        </a></span> <span class="next"><a href="/lambduh/UpgradeToV2.html">
          v1 to v2 Migration
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/lambduh/assets/js/app.ff34b4b2.js" defer></script><script src="/lambduh/assets/js/3.a35d3ce9.js" defer></script>
  </body>
</html>
